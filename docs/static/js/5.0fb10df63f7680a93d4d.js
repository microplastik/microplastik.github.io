webpackJsonp([5],{813:function(t,i,e){"use strict";function s(t){e(847)}Object.defineProperty(i,"__esModule",{value:!0});var a=e(837),n=e(849),o=e(17),l=s,r=o(a.a,n.a,!1,l,null,null);i.default=r.exports},837:function(t,i,e){"use strict";i.a={name:"login",props:["app"],methods:{checkLogin:function(){var t=this,i=this.login,e=(this.password,this.app.app.app||this.app.app||this.app);this.first_stage=!1,e.auth.checkLogin(i).then(function(i){if(i.registered)return t.registered=!0;t.isNew=!0})},loginEmail:function(){var t=this,i=this.login,e=this.password;(this.app.app.app||this.app.app||this.app).auth.processLogin({type:"email",login:i,password:e}).then(function(i){t.$router.push("/admin/home")}).catch(function(t){console.error("===== login error ======"),console.error(t)})},registerEmail:function(){var t=this,i=this.login,e=this.name;(this.app.app.app||this.app.app||this.app).auth.register({login:i,name:e}).then(function(i){t.email_not_sent=!1,t.email_sent=!0}).catch(function(t){console.error(t)})},resetPassword:function(){var t=this,i=this.app.app.app||this.app.app||this.app,e=this.login;i.auth.resetPassword({login:e}).then(function(i){t.email_not_sent=!1,t.email_sent=!0}).catch(function(t){console.error(t)})},hideModal:function(){this.login="",this.name="",this.password="",this.registered=!1,this.first_stage=!0,this.isNew=!1,this.enabled=!1,this.email_not_sent=!0,this.email_sent=!1},loginFacebook:function(){this.enabled=!1,this.showPromiseResolve({type:"fb"})},checkAuth:function(){var t=this.app.app.app||this.app.app||this.app;null!=t.auth.auth&&null!=t.auth.auth.name&&""!=t.auth.auth.name&&this.$router.push("/admin/home")}},data:function(){return setTimeout(this.checkAuth,1e3),{title:"Войти",login:"",password:"",registered:!1,first_stage:!0,isNew:!1,email_sent:!1,email_not_sent:!0,enabled:!1}}}},847:function(t,i,e){var s=e(848);"string"==typeof s&&(s=[[t.i,s,""]]),s.locals&&(t.exports=s.locals);e(811)("9ed45770",s,!0,{})},848:function(t,i,e){i=t.exports=e(810)(!1),i.push([t.i,".login-view h1{font-size:36px;font-weight:700}.hero-img{width:300px;float:left;margin-right:15px}.flex-hero p{text-align:center;color:#000}.flex-hero p.hero-details{width:300px;font-size:18px;font-weight:700}.login-view{font-size:16px;color:#000}",""])},849:function(t,i,e){"use strict";var s=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{staticClass:"login-view flex-box flex-column"},[e("div",{staticClass:"container flex-item flex-box flex-column"},[e("div",{staticClass:"flex-item flex-box flex-middle"},[e("div",{staticClass:"jumbotron"},[e("h1",{staticClass:"display-4"},[t._v(t._s(t.title))]),t._v(" "),t.email_not_sent?e("div",{staticClass:"auth-modal"},[e("div",{staticClass:"login-form"},[e("div",{staticClass:"login-form-item login-email"},[e("b-form-group",{attrs:{id:"fieldset-1",label:"Ваш Email","label-for":"input-1"}},[e("b-form-input",{attrs:{id:"input-1",trim:""},model:{value:t.login,callback:function(i){t.login=i},expression:"login"}})],1)],1),t._v(" "),e("div",{staticClass:"login-form-item login-name"},[t.isNew?e("b-form-group",{attrs:{id:"fieldset-3",label:"Ваше Имя","label-for":"input-3"}},[e("b-form-input",{attrs:{id:"input-3",trim:""},model:{value:t.name,callback:function(i){t.name=i},expression:"name"}})],1):t._e()],1),t._v(" "),t.first_stage?e("b-button",{staticStyle:{width:"100%"},attrs:{variant:"outline-success"},on:{click:t.checkLogin}},[t._v("\n                  Далее\n              ")]):t._e(),t._v(" "),t.registered?e("div",{staticClass:"login-form-item login-password"},[e("b-form-group",{attrs:{id:"fieldset-2",label:"Ваш Пароль","label-for":"input-2"}},[e("b-form-input",{attrs:{trim:""},model:{value:t.password,callback:function(i){t.password=i},expression:"password"}})],1)],1):t._e(),t._v(" "),t.registered?e("b-button",{staticStyle:{width:"100%"},attrs:{variant:"outline-success"},on:{click:t.loginEmail}},[t._v("\n                Войти\n            ")]):t._e(),t._v(" "),t.registered?e("b-button",{staticStyle:{width:"100%","margin-top":"10px"},attrs:{variant:"outline-primary"},on:{click:t.resetPassword}},[t._v("\n                Восстановить пароль\n            ")]):t._e(),t._v(" "),t.isNew?e("b-button",{staticStyle:{width:"100%"},attrs:{variant:"outline-success"},on:{click:t.registerEmail}},[t._v("\n                Зарегистрироваться\n            ")]):t._e()],1)]):t._e(),t._v(" "),t.email_sent?e("div",{staticClass:"auth-modal",attrs:{slot:"body"},slot:"body"},[e("h2",[t._v("Вам отправлен email")])]):t._e()])])])])},a=[],n={render:s,staticRenderFns:a};i.a=n}});